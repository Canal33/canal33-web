<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Canal 33 | Inicio</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: { extend: { colors: { turquesa: '#00ced1', negroPro: '#050505', grisOscuro: '#0f0f0f' } } }
        }
    </script>
    <style>
        @keyframes ticker {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }
        .animate-ticker { animation: ticker 30s linear infinite; }
        .animate-ticker:hover { animation-play-state: paused; }
        .custom-scrollbar::-webkit-scrollbar { width: 4px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #00ced1; border-radius: 10px; }
    </style>
</head>
<body class="bg-negroPro text-white overflow-x-hidden">

    <header class="border-b border-gray-800 bg-negroPro/90 backdrop-blur-md sticky top-0 z-50">
        <div class="container mx-auto px-4 py-4 flex justify-between items-center">
            <a href="index.html" class="flex items-center gap-3 group">
                <img src="img_logos/CANAL 33.png" alt="Canal 33" class="h-20 w-auto">
            </a>

            <nav class="hidden space-x-8 text-sm font-bold tracking-widest uppercase lg:flex">
                <a href="noticias.html" class="hover:text-turquesa transition">Noticias</a>
                <a href="espectaculos.html" class="hover:text-turquesa transition">Espectáculos</a>
                <a href="deportes.html" class="hover:text-turquesa transition">Deportes</a>
                <a href="programacion.html" class="hover:text-turquesa transition">Programación</a>          
                <a href="prensa.html" class="hover:text-turquesa transition">Nosotros</a>
            </nav>

            <a href="vivo.html" class="bg-turquesa text-negroPro flex animate-pulse items-center gap-2 rounded-full px-5 py-2 text-xs font-black hover:bg-white transition-colors">
                <span class="h-2 w-2 rounded-full bg-red-600"></span> EN VIVO
            </a>
        </div>
    </header>

    <section class="container mx-auto px-4 pt-8 grid grid-cols-1 lg:grid-cols-3 gap-8 mb-12">
        <div class="lg:col-span-2">
            <div class="aspect-video bg-black rounded-[2rem] overflow-hidden border border-gray-800 shadow-2xl">
                <iframe id="live-player" class="w-full h-full" 
                    src="https://TU_SERVIDOR_STREAMING.com/live/playlist.m3u8" type="application/x-mpegURL"
                    title="Canal 33 En Vivo" frameborder="0" 
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
                </iframe>
            </div>
        </div>

        <div class="bg-grisOscuro rounded-[2rem] border border-gray-800 p-6 shadow-xl flex flex-col h-full">
            <h2 class="text-turquesa font-black uppercase text-xs tracking-widest mb-6 flex items-center gap-2">
                <span class="w-2 h-2 bg-turquesa rounded-full animate-ping"></span> Lo Último
            </h2>
            <div id="sidebar-latest" class="space-y-6 overflow-y-auto custom-scrollbar pr-2">
                </div>
        </div>
    </section>

    <div class="relative bg-turquesa border-y border-black/10 my-12 overflow-hidden flex items-center h-10">
        <div class="absolute left-0 z-20 bg-red-600 text-white px-4 h-full flex items-center shadow-[5px_0_15px_rgba(0,0,0,0.3)]">
            <span class="text-[10px] font-black uppercase tracking-tighter whitespace-nowrap animate-pulse">
                <i class="fas fa-bolt mr-1"></i> Última Hora
            </span>
        </div>
        <div id="ticker-content" class="whitespace-nowrap flex gap-12 font-black italic uppercase text-xs text-black animate-ticker ml-4">
            </div>
    </div>

    <section class="container mx-auto px-4 mb-24">
        <div class="flex justify-between items-end mb-10">
            <div>
                <h2 class="text-turquesa font-black text-xs uppercase tracking-[0.4em] mb-2 italic">● En Pantalla</h2>
                <h3 class="text-5xl font-black uppercase tracking-tighter italic text-white">Guía de <span class="text-turquesa">Hoy</span></h3>
            </div>
            <a href="programacion.html" class="text-gray-500 hover:text-turquesa font-black uppercase text-[10px] tracking-widest border-b border-gray-800 pb-1 transition-all">Ver guía completa →</a>
        </div>
        <div id="programacion-home" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <div class="col-span-full h-48 flex items-center justify-center border border-gray-900 rounded-[2rem]">
                <p class="text-gray-700 font-black animate-pulse uppercase tracking-widest">Sincronizando señal...</p>
            </div>
        </div>
    </section>

    <main class="container mx-auto px-4 space-y-24 pb-20">
        <section>
            <div class="flex justify-between items-end mb-10">
                <h2 class="text-5xl font-black uppercase tracking-tighter">Centro de <span class="text-turquesa italic">Noticias</span></h2>
                <a href="noticias.html" class="text-turquesa text-xs font-bold uppercase hover:underline">Ir a Noticias →</a>
            </div>
            <div id="grid-noticias" class="grid grid-cols-1 md:grid-cols-3 gap-10"></div>
        </section>

        <section class="bg-gradient-to-br from-red-900/10 to-transparent p-10 rounded-[3rem] border border-red-500/10">
            <div class="flex justify-between items-end mb-10">
                <h2 class="text-5xl font-black uppercase tracking-tighter">Zona <span class="text-red-500 italic">Deportiva</span></h2>
                <a href="deportes.html" class="text-red-500 text-xs font-black uppercase tracking-widest hover:underline">Ver más Deportes</a>
            </div>
            <div id="grid-deportes" class="grid grid-cols-1 md:grid-cols-4 gap-8"></div>
        </section>
    </main>

 <footer class="border-t border-gray-800 bg-[#050505] pt-16 pb-8">
      <div class="container mx-auto px-4">
        <div class="mb-12 grid grid-cols-1 gap-12 md:grid-cols-4">
          <div class="space-y-6">
            <img src="f:\CANAL 33\PAGINA WEB CANAL 33\C33_CODE WEB\img_logos\LOGO CANAL 33.png" alt="Canal 33.2" class="h-25 w-auto" />
            <p class="text-sm leading-relaxed text-gray-500">Transmitiendo la verdad con tecnología de vanguardia. Líderes en noticias, deportes y entretenimiento 24/7.</p>
            <div class="flex gap-4 text-gray-400">
              <a href="https://www.facebook.com/Canal33mx?locale=es_LA" class="hover:text-turquesa text-xl transition"><i class="fab fa-facebook"></i></a>
              <a href="https://www.instagram.com/canal33mx/" class="hover:text-turquesa text-xl transition"><i class="fab fa-instagram"></i></a>
              <a href="https://www.tiktok.com/@canal33tijuana" class="hover:text-turquesa text-xl transition"><i class="fab fa-tiktok"></i></a>
              <a href="https://www.youtube.com/@Canal33Noticias" class="hover:text-turquesa text-xl transition"><i class="fab fa-youtube"></i></a>
            </div>
          </div>

          <div>
            <h4 class="mb-6 text-xs font-bold tracking-widest text-white uppercase">Contenido</h4>
            <ul class="space-y-4 text-sm font-medium text-gray-500">
              <li><a href="#" class="hover:text-turquesa transition">Últimas Noticias</a></li>
              <li><a href="#" class="hover:text-turquesa transition">Streaming en Vivo</a></li>
              <li><a href="#" class="hover:text-turquesa transition">Programación</a></li>
            </ul>
          </div>

          <div>
            <h4 class="mb-6 text-xs font-bold tracking-widest text-white uppercase">Corporativo</h4>
            <ul class="space-y-4 text-sm font-medium text-gray-500">
              <li><a href="#" class="hover:text-turquesa transition">Publicidad y Ventas</a></li>
              <li><a href="#" class="hover:text-turquesa transition">Media Kit 2025</a></li>
              <li><a href="#" class="hover:text-turquesa transition">Términos de Servicio</a></li>
              <li><a href="#" class="hover:text-turquesa transition">Trabaja con Nosotros</a></li>
            </ul>
          </div>

          <div>
            <h4 class="mb-6 text-xs font-bold tracking-widest text-white uppercase">Alertas por Correo</h4>
            <p class="mb-4 text-xs text-gray-500">Recibe las noticias más importantes al instante.</p>
            <form class="flex flex-col gap-2">
              <input type="email" placeholder="tu@correo.com" class="focus:border-turquesa rounded-lg border border-gray-800 bg-gray-900 px-4 py-2 text-sm text-white focus:outline-none" />
              <button class="bg-turquesa text-negroPro rounded-lg py-2 text-xs font-bold tracking-widest uppercase transition hover:bg-white">Suscribirse</button>
            </form>
          </div>
        </div>

        <div class="flex flex-col items-center justify-between gap-4 border-t border-gray-900 pt-8 text-[10px] font-bold tracking-[0.2em] text-gray-600 uppercase md:flex-row">
          <p>© 2025 CANAL TV DIGITAL - TODOS LOS DERECHOS RESERVADOS</p>
          <div class="flex gap-6">
            <a href="#" class="hover:text-white">Privacidad</a>
            <a href="#" class="hover:text-white">Cookies</a>
          </div>
        </div>
      </div>
    </footer>

            <script>
                const WP_URL = 'https://public-api.wordpress.com/wp/v2/sites/canal338.wordpress.com/posts';
                
                // IDs de Categorías
                const ID_DEPORTES = 889; 
                const CAT_LUN_VIE = 55569380;
                const CAT_SAB = 196448;
                const CAT_DOM = 205851;

                // Lista de IDs a EXCLUIR de las secciones de noticias
                const EXCLUIR_PROG = `${CAT_LUN_VIE},${CAT_SAB},${CAT_DOM}`;

                async function cargarIndex() {
                    try {
                        // 1. CARGAR TODO MENOS PROGRAMACIÓN (Para Ticker y Sidebar)
                        // Usamos &categories_exclude para limpiar las noticias
                        const resNoticias = await fetch(`${WP_URL}?_embed&per_page=12&categories_exclude=${EXCLUIR_PROG}`);
                        const postsNoticiasRaw = await resNoticias.json();

                        // 1.1 TICKER (Solo noticias reales)
                        document.getElementById('ticker-content').innerHTML = postsNoticiasRaw.map(p => `<span>• ${p.title.rendered}</span>`).join(' ');

                        // 1.2 SIDEBAR "LO ÚLTIMO" (Solo noticias reales)
                        const sidebar = document.getElementById('sidebar-latest');
                        sidebar.innerHTML = ''; // Limpiar
                        postsNoticiasRaw.slice(0, 6).forEach(post => {
                            sidebar.innerHTML += `
                                <a href="noticia-detalle.html?id=${post.id}" class="group block border-b border-gray-800 pb-4 last:border-0">
                                    <span class="text-[9px] text-turquesa font-bold uppercase tracking-widest">${new Date(post.date).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</span>
                                    <h4 class="text-sm font-bold leading-tight group-hover:text-turquesa transition mt-1 uppercase text-white">${post.title.rendered}</h4>
                                </a>`;
                        });

                        // 1.3 GRID NOTICIAS (Excluimos Programación y también Deportes para que no se repitan)
                        const gridNoticias = document.getElementById('grid-noticias');
                        gridNoticias.innerHTML = '';
                        const soloNoticias = postsNoticiasRaw.filter(p => !p.categories.includes(ID_DEPORTES)).slice(0, 3);
                        
                        soloNoticias.forEach(p => {
                            const img = p._embedded?.['wp:featuredmedia']?.[0]?.source_url || 'https://via.placeholder.com/600';
                            gridNoticias.innerHTML += `
                                <article class="group cursor-pointer" onclick="location.href='noticia-detalle.html?id=${p.id}'">
                                    <div class="h-64 overflow-hidden rounded-[2rem] mb-6 border border-gray-800 relative">
                                        <img src="${img}" class="w-full h-full object-cover group-hover:scale-110 transition duration-700">
                                        <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"></div>
                                    </div>
                                    <h3 class="text-2xl font-black leading-tight uppercase tracking-tighter group-hover:text-turquesa transition">${p.title.rendered}</h3>
                                </article>`;
                        });

                        // 2. GRID DEPORTES (Específico de categoría 7)
                        const resDep = await fetch(`${WP_URL}?_embed&per_page=4&categories=${ID_DEPORTES}`);
                        const deportes = await resDep.json();
                        const gridDep = document.getElementById('grid-deportes');
                        gridDep.innerHTML = '';
                        deportes.forEach(p => {
                            const img = p._embedded?.['wp:featuredmedia']?.[0]?.source_url || 'https://via.placeholder.com/400';
                            gridDep.innerHTML += `
                                <article class="group cursor-pointer" onclick="location.href='noticia-detalle.html?id=${p.id}'">
                                    <div class="h-40 overflow-hidden rounded-2xl mb-4 border border-gray-800">
                                        <img src="${img}" class="w-full h-full object-cover group-hover:scale-110 transition duration-700">
                                    </div>
                                    <h3 class="text-sm font-black leading-tight group-hover:text-red-500 transition uppercase">${p.title.rendered}</h3>
                                </article>`;
                        });

                    } catch (e) { console.error("Error cargando noticias:", e); }
                }

                async function cargarProgramacionHome() {
                    const contenedor = document.getElementById('programacion-home');
                    const hoy = new Date().getDay();
                    let idCat = (hoy === 0) ? CAT_DOM : (hoy === 6) ? CAT_SAB : CAT_LUN_VIE;

                    try {
                        // Aquí SI llamamos específicamente a la categoría de programación
                        const res = await fetch(`${WP_URL}?categories=${idCat}&_embed&per_page=3`);
                        const programas = await res.json();
                        const minActuales = new Date().getHours() * 60 + new Date().getMinutes();
                        
                        contenedor.innerHTML = '';
                        programas.forEach(prog => {
                            const horario = prog.excerpt.rendered.replace(/<[^>]*>?/gm, '').trim();
                            const img = prog._embedded?.['wp:featuredmedia']?.[0]?.source_url || 'https://via.placeholder.com/800x450';
                            let esAhora = false;
                            try {
                                const [hI, mI] = horario.split('-')[0].trim().split(':').map(Number);
                                const [hF, mF] = horario.split('-')[1].trim().split(':').map(Number);
                                if (minActuales >= (hI*60+mI) && minActuales < (hF*60+mF)) esAhora = true;
                            } catch(e) {}

                            contenedor.innerHTML += `
                                <div class="relative h-72 rounded-[2rem] overflow-hidden group border ${esAhora ? 'border-turquesa ring-2 ring-turquesa/20' : 'border-gray-800'} transition-all duration-500">
                                    <img src="${img}" class="absolute inset-0 w-full h-full object-cover transition duration-700 group-hover:scale-110">
                                    <div class="absolute inset-0 bg-gradient-to-t from-black via-black/20 to-transparent"></div>
                                    <div class="absolute inset-0 p-8 flex flex-col justify-end">
                                        <div class="flex items-center gap-2 mb-1">
                                            ${esAhora ? '<span class="w-2 h-2 rounded-full bg-red-600 animate-pulse"></span>' : ''}
                                            <span class="text-turquesa font-black italic text-lg">${horario}</span>
                                        </div>
                                        <h4 class="text-2xl font-black uppercase tracking-tighter text-white leading-none group-hover:text-turquesa transition">${prog.title.rendered}</h4>
                                    </div>
                                    <a href="programacion.html" class="absolute inset-0 z-10"></a>
                                </div>`;
                        });
                    } catch (e) { contenedor.innerHTML = '<p class="text-gray-500 text-center col-span-full">Guía no disponible</p>'; }
                }

                // Ejecutar ambas funciones
                cargarIndex();
                cargarProgramacionHome();
            </script>
</body>
</html>